@{
    ViewBag.Title = "Home Page";
    Layout = "~/Views/Shared/_ScaleLayout.cshtml";
}

@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->

    <!--Reference the SignalR library and  the autogenerated SignalR hub script -->
    
    <script src="~/Scripts/jquery.signalR-2.1.2.min.js"></script>
    <script src="~/signalr/hubs"></script>

    <!-- Reference the custom signalR script -->
    <script src="~/Scripts/signalR-custom.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            // Get the user name and store it to prepend to messages.
            var username = "@ViewBag.UserName";
            $('#displayname').val(username);

            var chat = $.chatPlugin({
                container: "chatContainer",
                messageContainer: "messageContainer",
                nameContainer: "displayname"
            });

            chat.Init();

            $("#messageForm").submit(function (e) {
                var name = $("#displayname").val();
                var text = $("#messageContainer").val();
                var message = { Name: name, MessageText: text }
                chat.SendMessage(message);

                return false;
            });

            // Create a function that the hub can call back to display messages.
            chat.GetChat().client.addNewMessageToPage = function (message) {
                chat.AddMessage(message);
            };


        });

    </script>
}
<input type="hidden" id="displayname" />
<section class="hbox stretch">
    <section>
        <section class="vbox">
            <section class="scrollable padder">
                <section class="row m-b-md">
                    <div class="col-sm-6">
                        <h3 class="m-b-xs text-black">Chat Dashboard</h3>
                        <small>Welcome back, @Context.User.Identity.Name, <i class="fa fa-map-marker fa-lg text-primary"></i> New York City</small>
                    </div>
                    <div class="col-sm-6 text-right text-left-xs m-t-md">
                        <div class="btn-group">
                            <a class="btn btn-rounded btn-default b-2x dropdown-toggle" data-toggle="dropdown">Widgets <span class="caret"></span></a>
                            <ul class="dropdown-menu text-left pull-right">
                                <li><a href="#">Notification</a></li>
                                <li><a href="#">Messages</a></li>
                                <li><a href="#">Analysis</a></li>
                                <li class="divider"></li>
                                <li><a href="#">More settings</a></li>
                            </ul>
                        </div>
                        <a href="#" class="btn btn-icon b-2x btn-default btn-rounded hover"><i class="i i-bars3 hover-rotate"></i></a>
                        <a href="#nav, #sidebar" class="btn btn-icon b-2x btn-info btn-rounded" data-toggle="class:nav-xs, show"><i class="fa fa-bars"></i></a>
                    </div>
                </section>
                <div class="row">
                    <div class="col-sm-6">
                        <!-- THIS IS THE CHAT SECTION -->
                        <section class="panel panel-default">
                            <header class="panel-heading">Chat</header>
                            <section id="chatContainer" class="chat-list panel-body slim-scroll" data-height="350px" data-size="10px">
                                <article id="chat-id-1" class="chat-item right">
                                    <a href="#" class="pull-right thumb-sm avatar"><img src="/Content/ScaleTheme/images/a3.png" class="img-circle"></a>
                                    <section class="chat-body">
                                        <div class="panel bg-light text-sm m-b-none">
                                            <div class="panel-body">
                                                <span class="arrow right"></span>
                                                <p class="m-b-none">You can start with your communication :)</p>
                                            </div>
                                        </div>
                                        <small class="text-muted">Administrator</small>
                                    </section>
                                </article>
                            </section>

                            <footer class="panel-footer">
                                <!-- chat form -->
                                <article class="chat-item" id="chat-form">
                                    <a class="pull-left thumb-sm avatar"><img src="/Content/ScaleTheme/images/a3.png" class="img-circle"></a>
                                    <section class="chat-body">
                                        <form action="" class="m-b-none" id="messageForm">
                                            <div class="input-group">
                                                <input type="text" id="messageContainer" class="form-control" placeholder="Say something">
                                                <span class="input-group-btn">
                                                    <button id="sendMessage" class="btn btn-default" type="submit">SEND</button>
                                                </span>
                                            </div>
                                        </form>
                                    </section>
                                </article>
                            </footer>
                        </section>
                        <!-- END OF THE CHAT SECTION -->
                    </div>
                </div>
            </section>
        </section>
    </section>
    <!-- side content -->
    <aside class="aside-md bg-black hide" id="sidebar">
        <section class="vbox animated fadeInRight">
            <section class="scrollable">
                <div class="wrapper"><strong>Friends</strong></div>
                <ul class="list-group no-bg no-borders auto">
                    <li class="list-group-item">
                        <div class="media">
                            <span class="pull-left thumb-sm avatar">
                                <img src="/Content/ScaleTheme/images/a3.png" alt="..." class="img-circle bg-white">
                                <i class="on b-black bottom"></i>
                            </span>
                            <div class="media-body">
                                <div><a href="#">Chris Fox</a></div>
                                <small class="text-muted">about 2 minutes ago</small>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="media">
                            <span class="pull-left thumb-sm avatar">
                                <img src="/Content/ScaleTheme/images/a3.png" alt="..." class="bg-white">
                                <i class="on b-black bottom"></i>
                            </span>
                            <div class="media-body">
                                <div><a href="#">Amanda Conlan</a></div>
                                <small class="text-muted">about 2 hours ago</small>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="media">
                            <span class="pull-left thumb-sm avatar">
                                <img src="/Content/ScaleTheme/images/a3.png" alt="..." class="bg-white">
                                <i class="busy b-black bottom"></i>
                            </span>
                            <div class="media-body">
                                <div><a href="#">Dan Doorack</a></div>
                                <small class="text-muted">3 days ago</small>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="media">
                            <span class="pull-left thumb-sm avatar">
                                <img src="/Content/ScaleTheme/images/a3.png" alt="..." class="bg-white">
                                <i class="away b-black bottom"></i>
                            </span>
                            <div class="media-body">
                                <div><a href="#">Lauren Taylor</a></div>
                                <small class="text-muted">about 2 minutes ago</small>
                            </div>
                        </div>
                    </li>
                </ul>
            </section>
        </section>
    </aside>
    <!-- / side content -->
</section>
<a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen" data-target="#nav"></a>
